# In this modified configuration:
#
# 1. Tags have been added to each repository using the `tag` attribute. These tags describe the purpose or category of each repository.
#
# 2. A `skip` attribute has been added to each repository, which uses an environment variable to determine whether the repository should be skipped during checkout. The environment variables are named `SKIP_*` (e.g., `SKIP_FZF`, `SKIP_OH_MY_BASH`, etc.).
# 
# 3. The `${VAR:-false}` syntax is used for the `skip` attribute. This means if the environment variable is not set, it defaults to `false`, allowing the repository to be checked out.
#
# To use this configuration:
#
# - You can now use tags to selectively checkout repositories. For example:
#  ```
#  mr -t shell checkout
#  ```
#  This will checkout all repositories tagged with "shell".
#
# - To skip specific repositories, you can set the corresponding environment variables before running `mr`. For example:
# ```
#  export SKIP_FZF=true
#  export SKIP_SPACEVIM=true
#  mr checkout
#  ```
#  This will skip the fzf and SpaceVim repositories during checkout.
#
# Remember to adjust the tags according to your preferences and add any additional tags you find useful for organizing your repositories.
#
# Citations:
# [1] https://github.com/junegunn/fzf

[DEFAULT]
git_gc = git gc "$@"
jobs = 5

# Set global remote configurations
lib = 
	   # Function to update remote URLs
	   update_remote_urls() {
	       local repo_name=$(basename $(pwd))
	       local github_user="DNajjarzade"  # Replace with your GitHub username
	       
	       # Set HTTP URL for fetching
	       git remote set-url origin --push "git@github.com:${github_user}/${repo_name}.git"
	       git remote set-url origin "https://github.com/${github_user}/${repo_name}.git"
	   }

# Apply the remote URL updates after checkout
post_checkout = update_remote_urls

include = cat ~/.config/mr/config.d/*

[.fzf]
checkout = git clone 'https://github.com/junegunn/fzf.git' '.fzf'
post_checkout = 
	  if [ ! -f ~/.fzf_installed ]; then
	      ~/.fzf/install --all
	      touch ~/.fzf_installed
	  fi
tag = tools, shell
skip = ${SKIP_FZF:-false}

[.oh-my-bash]
checkout = git clone 'https://github.com/DNajjarzade/oh-my-bash.git' '.oh-my-bash'
tag = shell, customization
skip = ${SKIP_OH_MY_BASH:-false}

[.liquidprompt]
checkout = git clone 'https://github.com/DNajjarzade/liquidprompt.git' '.liquidprompt'
tag = shell, prompt
skip = ${SKIP_LIQUIDPROMPT:-false}

[.tmux/plugins/tpm]
checkout = git clone 'https://github.com/tmux-plugins/tpm' 'tpm'
tag = tmux, plugins
skip = ${SKIP_TMUX_TPM:-false}

[fancy-motd]
checkout = git clone 'https://github.com/DNajjarzade/fancy-motd.git' 'fancy-motd'
tag = system, customization
skip = ${SKIP_FANCY_MOTD:-false}

[.SpaceVim]
checkout = git clone --depth 1 'https://github.com/SpaceVim/SpaceVim.git' '.SpaceVim'
tag = editor, vim
skip = ${SKIP_SPACEVIM:-false}

[.pyenv]
checkout = git clone --depth 1 'https://github.com/pyenv/pyenv.git' '.pyenv'
tag = python, development
skip = ${SKIP_PYENV:-false}

[ble.sh]
checkout = git clone --depth 1 'https://github.com/akinomyoga/ble.sh.git' 'ble.sh'
tag = shell, enhancement
skip = ${SKIP_BLE_SH:-false}

[.rbenv]
checkout = git clone --depth 1 'https://github.com/rbenv/rbenv.git' '.rbenv'
tag = ruby, development
skip = ${SKIP_RBENV:-false}

[fzf-git.sh]
checkout = git clone --depth 1 'https://github.com/junegunn/fzf-git.sh.git' 'fzf-git.sh'
tag = git, tools
skip = ${SKIP_FZF_GIT:-false}

[.config/emacs]
checkout = git clone  --depth 1 'https://github.com/doomemacs/doomemacs' 'emacs'
post_checkout = 
	  if [ ! -f ~/.emacs_installed ]; then
	      ~/.config/emacs/bin/doom install
	      touch ~/.emacs_installed
	  fi
tag = editor, emacs
skip = ${SKIP_DOOM_EMACS:-false}

[.asdf]
checkout = git clone 'https://github.com/asdf-vm/asdf.git' '.asdf'
